# This file was generated by generate-sync-all script. Don't edit it directly.

name: Sync Files & Secrets
'on':
    push:
        branches:
            - master
            - main
jobs:
    sync-npm-packages:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - id: repos
              run: node -p "'::set-output name=repos::'+JSON.stringify(JSON.parse(require('fs').readFileSync('repos.json', 'utf-8')))"
            - name: Sync NPM Token
              uses: google/secrets-sync-action@master
              with:
                  secrets: |
                      ^NPM_TOKEN$
                      ^GH_TOKEN$
                  repositories_list_regex: false
                  repositories: ${{ join(fromJSON(steps.repos.outputs.repos).npm-packages.repos, '\n') }}
                  github_token: ${{ secrets.SYNC_GITHUB_TOKEN }}
              env:
                  NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
                  GH_TOKEN: ${{ secrets.SYNC_GITHUB_TOKEN }}
            - name: Sync VSCE & OVSX Tokens (PAT)
              uses: google/secrets-sync-action@master
              with:
                  secrets: |
                      ^VSCE_PAT$
                      ^OVSX_PAT$
                      ^GH_TOKEN$
                  repositories_list_regex: false
                  repositories: ${{ join(fromJSON(steps.repos.outputs.repos).vscode-extensions.repos, '\n') }}
                  github_token: ${{ secrets.SYNC_GITHUB_TOKEN }}
              env:
                  VSCE_PAT: ${{ secrets.VSCE_PAT }}
                  OVSX_PAT: ${{ secrets.OVSX_PAT }}
                  GH_TOKEN: ${{ secrets.SYNC_GITHUB_TOKEN }}
